<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Countdown Timers</title>
        <style>
            html,
            body {
                margin: 0;
                padding: 0;
                height: 100%;
                width: 100%;
                font-family: sans-serif;
                background: #f0f0f0;
            }

            /* Container for initial buttons */
            .button-container {
                display: flex;
                justify-content: center;
                align-items: center;
                height: 100vh;
            }

            button {
                margin: 20px;
                padding: 20px 40px;
                font-size: 1.5rem;
                cursor: pointer;
            }

            /* Fullscreen countdown display */
            .countdown-display {
                display: none;
                justify-content: center;
                align-items: center;
                background: #000;
                color: #fff;
                font-size: 30vw;
                font-weight: bold;
                height: 100vh;
                width: 100vw;
                text-align: center;
                position: relative;
            }

            /* Flash animation when done */
            @keyframes flash {
                0% {
                    background: #000;
                    color: #fff;
                }
                50% {
                    background: #fff;
                    color: #000;
                }
                100% {
                    background: #000;
                    color: #fff;
                }
            }

            .flash {
                animation: flash 0.5s alternate infinite;
            }

            /* Cancel (X) button */
            .cancel-btn {
                position: absolute;
                top: 6px;
                left: 6px;
                font-size: 5rem;
                /* font-weight: bold; */
                color: #ffffff30;
                background: transparent;
                border: none;
                cursor: pointer;
                display: none;
            }
        </style>
    </head>
    <body>
        <div class="button-container">
            <button data-seconds="120">2 min</button>
            <button data-seconds="40">40 s</button>
            <button data-seconds="10">10 s</button>
        </div>

        <div class="countdown-display">
            <button class="cancel-btn">Ã—</button>
            <div class="time-text"></div>
        </div>

        <script>
            const buttons = document.querySelectorAll("button[data-seconds]");
            const display = document.querySelector(".countdown-display");
            const timeText = document.querySelector(".time-text");
            const buttonContainer = document.querySelector(".button-container");
            const cancelBtn = document.querySelector(".cancel-btn");

            let intervalId = null;

            // Convert seconds to mm:ss
            function formatTime(seconds) {
                const m = Math.floor(seconds / 60);
                const s = seconds % 60;
                return `${m}:${s.toString().padStart(2, "0")}`;
            }

            buttons.forEach((btn) => {
                btn.addEventListener("click", () => {
                    const totalSeconds = parseInt(
                        btn.getAttribute("data-seconds"),
                        10
                    );
                    startCountdown(totalSeconds);
                });
            });

            cancelBtn.addEventListener("click", cancelCountdown);

            function startCountdown(timeLeft) {
                // Hide buttons, show display and cancel button
                buttonContainer.style.display = "none";
                display.style.display = "flex";
                cancelBtn.style.display = "block";
                timeText.textContent = formatTime(timeLeft);

                intervalId = setInterval(() => {
                    timeLeft--;
                    timeText.textContent = formatTime(timeLeft);
                    if (timeLeft <= 0) {
                        clearInterval(intervalId);
                        countdownFinished();
                    }
                }, 1000);
            }

            function countdownFinished() {
                display.classList.add("flash");
                timeText.textContent = "0:00";
                // After 5 seconds of flashing, stop flashing and reset
                setTimeout(() => {
                    resetUI();
                }, 5000);
            }

            function cancelCountdown() {
                // If an interval is running, clear it
                if (intervalId) {
                    clearInterval(intervalId);
                }
                resetUI();
            }

            function resetUI() {
                display.classList.remove("flash");
                display.style.display = "none";
                cancelBtn.style.display = "none";
                buttonContainer.style.display = "flex";
            }
        </script>
    </body>
</html>
